# Maven

#trigger:
#- azure

jobs:
- job: Maven
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: Maven@3
    inputs:
      mavenPomFile: 'pom.xml'
      mavenOptions: '-Xmx3072m'
      javaHomeOption: 'JDKVersion'
      jdkVersionOption: '1.8'
      jdkArchitectureOption: 'x64'
- job: Loadtest
  pool:
    vmImage: 'windows-latest'
  steps:
  - task: ApicaLoadtest@2
    inputs:
      apiBaseUrl: 'https://api-ltp.apicasystem.com/v1/'
      apiAuthenticationToken: '4074152F-FAED-4ED5-B45F-525F809C91AF'
      presetName: 'UAT_Stresstest'
      scenarioName: 'Ticketmonster_deploy_v2.class'
      failOnLoopsThreshold: true
      failOnAvgPageResponseTime: true
      avgResponseTimePerPageThreshold: '5'
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java
# new lines

